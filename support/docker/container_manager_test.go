package docker

import (
	"testing"
)

func TestContainer(t *testing.T) {
	//testPortUsing = true
	//container := NewContainerManager()
	//
	//postgresDriver1 := NewPostgresImpl("goravel", "goravel", "Framework!123")
	//postgresDriver1.port = 5432
	//postgresDriver1.containerID = "123456"
	//
	//postgresDriver2 := NewPostgresImpl("goravel", "goravel", "Framework!123")
	//postgresDriver2.port = 5433
	//postgresDriver2.containerID = "1234565"
	//
	//sqliteDriver := NewSqliteImpl("goravel")
	//
	//mysqlDriver := NewMysqlImpl("goravel", "goravel", "Framework!123")
	//mysqlDriver.port = 5432
	//mysqlDriver.containerID = "123456"
	//
	//sqlserverDriver := NewSqlserverImpl("goravel", "goravel", "Framework!123")
	//sqlserverDriver.port = 5432
	//sqlserverDriver.containerID = "123456"
	//
	//container.Add(ContainerTypePostgres, postgresDriver1)
	//container.Add(ContainerTypePostgres, postgresDriver2)
	//container.Add(ContainerTypeSqlite, sqliteDriver)
	//container.Add(ContainerTypeMysql, mysqlDriver)
	//container.Add(ContainerTypeSqlserver, sqlserverDriver)
	//
	//containers := container.All()
	//assert.Len(t, containers, 4)
	//assert.Len(t, containers[ContainerTypePostgres], 2)
	//assert.Len(t, containers[ContainerTypeSqlite], 1)
	//assert.Len(t, containers[ContainerTypeMysql], 1)
	//assert.Len(t, containers[ContainerTypeSqlserver], 1)
	//assert.Equal(t, postgresDriver1, containers[ContainerTypePostgres][0])
	//assert.Equal(t, postgresDriver2, containers[ContainerTypePostgres][1])
	//assert.Equal(t, sqliteDriver, containers[ContainerTypeSqlite][0])
	//assert.Equal(t, mysqlDriver, containers[ContainerTypeMysql][0])
	//assert.Equal(t, sqlserverDriver, containers[ContainerTypeSqlserver][0])
	//
	//defer func() {
	//	testPortUsing = false
	//	assert.NoError(t, container.Remove())
	//}()
}
